/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package View;

import Controller.ControllerPengiriman;
import KoneksiDB.Koneksi;
import java.sql.Connection;
import java.text.SimpleDateFormat;
import java.util.TimerTask;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.RowFilter;
import javax.swing.Timer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;
import sessionlogin.PetugasLogin;

/**
 *
 * @author Anjar
 */
public class ViewPengiriman extends javax.swing.JInternalFrame {

    /**
     * Creates new form ViewPengiriman
     */
    
    ControllerPengiriman control;
    private Connection conn = new Koneksi().connection();
    private DefaultTableModel tabel;
    public ViewPengiriman() {
        initComponents();
     control = new ControllerPengiriman(this);
        control.isiTableBarang();
       bersihhkantable();
        tanggal();
      String KD = PetugasLogin.getKodeLogin();
        lbnamaadm.setText(KD);
       control.awal();
       TanggalA.setText(new SimpleDateFormat("dd-MMMM-yyyy").format(new java.util.Date()));
//       setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
      control.isicombosupplier();
    }
      
      public void sorter(){
       TableRowSorter<TableModel>sorter = new TableRowSorter<TableModel>(((DefaultTableModel)tbkirim.getModel()));
        sorter.setRowFilter(RowFilter.regexFilter(txtid.getText()));
        tbkirim.setRowSorter(sorter);
      }
     public void tanggal(){
            txttgl.setText(new SimpleDateFormat("yyyy-MM-dd").format(new java.util.Date()));
     }
      private void bersihhkantable(){
          Object[]baris = {"NO","ID PENGIRIMAN","ID BARANG","NAMA BARANG","HARGA","JUMLAH KIRIM"};
          tabel = new DefaultTableModel(null,baris);
          tbkirim.setModel(tabel);
      }
      
     
//      
//      public void hitung(){
//     int harga = Integer.parseInt(txthargabarang.getText());
//         int jumlah = Integer.parseInt(txtqty.getText());
//         int total = harga * jumlah;
//         txtsubtotal.setText(String.valueOf(total));
//}
 
     public void Total(){
         int total = 0;
         for (int i = 0; i < tbkirim.getRowCount(); i++) {
             int ammount = Integer.parseInt(String.valueOf(tbkirim.getValueAt(i, 5)));
             total += ammount;
  
         }
         txttotal.setText(String.valueOf(""+total));
     }
    
     
     public void resetbarang(){
          txtidbarang.setText("");
        txtnamabarang.setText("");
        txtharga.setText("");
        txtjumlah.setText("");
      
        txtno.setText("");
     }
     
     public void matikantextcs(){
         txtidsupplier.setEditable(false);
         cbnama.setEditable(false);
         txtalamat.setEditable(false);
         txttlp.setEditable(false);
     }
        public void hidupkantextcs(){
         txtidsupplier.setEditable(true);
         cbnama.setEditable(true);
         txtalamat.setEditable(true);
         txttlp.setEditable(true);
     }
        
        public void simpantable(){
    
         int stok =1;
          if("".equals(cbnama.getSelectedItem()=="--Pilih Supplier--")|"".equals(txttlp.getText())| "".equals(txtalamat.getText())|"".equals(txtjumlah.getText())|txtjumlah.getText().isEmpty()==true ){
            
            JOptionPane.showMessageDialog(null, "Quantity/Jumlah tidak boleh kosong atau melebihi stok yang tersedia! dan Silahkan Lengkapi Data Transaksi ..!! ");               
            stok=0;
        } 
         if(!txtjumlah.getText().isEmpty() && stok>0){
        control.tambah_stok();
        control.simpan_detail();
        control.isiTablePengiriman();
        control.isiTableBarang();
       sorter();
       Total();
       resetbarang();
       matikantextcs();
       btambah1.setEnabled(true);
         }
      
     }
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        txtno = new javax.swing.JTextField();
        jLabel14 = new javax.swing.JLabel();
        txttgl = new javax.swing.JLabel();
        lbnamaadm = new javax.swing.JLabel();
        jPanel6 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        txtidsupplier = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        txttlp = new javax.swing.JTextField();
        jScrollPane4 = new javax.swing.JScrollPane();
        txtalamat = new javax.swing.JTextArea();
        jLabel11 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        cbnama = new javax.swing.JComboBox<>();
        jPanel3 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tbbarang = new javax.swing.JTable();
        jPanel5 = new javax.swing.JPanel();
        txtnamabarang = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        txtidbarang = new javax.swing.JTextField();
        txtharga = new javax.swing.JTextField();
        jLabel17 = new javax.swing.JLabel();
        jLabel20 = new javax.swing.JLabel();
        txtstokbarang = new javax.swing.JTextField();
        jLabel13 = new javax.swing.JLabel();
        txtjumlah = new javax.swing.JTextField();
        btambah1 = new javax.swing.JButton();
        bkurang = new javax.swing.JButton();
        jPanel1 = new javax.swing.JPanel();
        jLabel12 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        txtid = new javax.swing.JTextField();
        TanggalA = new javax.swing.JLabel();
        jPanel4 = new javax.swing.JPanel();
        jScrollPane3 = new javax.swing.JScrollPane();
        tbkirim = new javax.swing.JTable();
        txttotal = new javax.swing.JTextField();
        jLabel23 = new javax.swing.JLabel();
        btambah2 = new javax.swing.JButton();
        jLabel25 = new javax.swing.JLabel();
        btambah = new javax.swing.JButton();

        txtno.setEditable(false);
        txtno.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        txtno.setForeground(new java.awt.Color(0, 0, 255));
        txtno.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtno.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtnoActionPerformed(evt);
            }
        });

        jLabel14.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel14.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel14.setText("NO.");

        txttgl.setForeground(new java.awt.Color(240, 240, 240));
        txttgl.setText("-");

        lbnamaadm.setText("jLabel1");

        setClosable(true);

        jPanel6.setBackground(new java.awt.Color(0, 204, 0));
        jPanel6.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        jPanel6.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel2.setBackground(new java.awt.Color(0, 204, 0));
        jPanel2.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        txtidsupplier.setEditable(false);
        txtidsupplier.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txtidsupplier.setDisabledTextColor(new java.awt.Color(255, 0, 0));
        txtidsupplier.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtidsupplierFocusGained(evt);
            }
        });
        txtidsupplier.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtidsupplierKeyReleased(evt);
            }
        });

        jLabel10.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel10.setText("Nama");

        jLabel8.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel8.setText("No Telepon ");

        txttlp.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txttlp.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txttlpActionPerformed(evt);
            }
        });

        txtalamat.setColumns(20);
        txtalamat.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txtalamat.setRows(5);
        jScrollPane4.setViewportView(txtalamat);

        jLabel11.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel11.setText("Alamat");

        jLabel15.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel15.setText("Supplier Id");

        cbnama.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        cbnama.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cbnamaItemStateChanged(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(9, 9, 9)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel11, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(20, 20, 20)
                        .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 230, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel15, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel10, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(txttlp, javax.swing.GroupLayout.DEFAULT_SIZE, 230, Short.MAX_VALUE)
                            .addComponent(txtidsupplier)
                            .addComponent(cbnama, javax.swing.GroupLayout.Alignment.TRAILING, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addGap(0, 17, Short.MAX_VALUE))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(9, 9, 9)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel15, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(txtidsupplier, javax.swing.GroupLayout.PREFERRED_SIZE, 21, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(2, 2, 2)))
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(4, 4, 4)
                        .addComponent(jLabel10, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(cbnama, javax.swing.GroupLayout.DEFAULT_SIZE, 24, Short.MAX_VALUE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txttlp))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel11, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 23, Short.MAX_VALUE))
                    .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE))
                .addContainerGap())
        );

        jPanel6.add(jPanel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 139, 380, 169));

        jPanel3.setBackground(new java.awt.Color(0, 204, 0));
        jPanel3.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        tbbarang.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tbbarang.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tbbarangMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(tbbarang);

        jPanel5.setBackground(new java.awt.Color(0, 204, 0));
        jPanel5.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        jPanel5.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        txtnamabarang.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txtnamabarang.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtnamabarang.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        txtnamabarang.setDisabledTextColor(new java.awt.Color(255, 255, 255));
        jPanel5.add(txtnamabarang, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 10, 140, 25));

        jLabel9.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel9.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel9.setText("Kode Barang");
        jLabel9.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jPanel5.add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 90, 25));

        jLabel6.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel6.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel6.setText("Stok");
        jPanel5.add(jLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 40, 50, 25));

        txtidbarang.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txtidbarang.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtidbarang.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        txtidbarang.setDisabledTextColor(new java.awt.Color(255, 255, 255));
        jPanel5.add(txtidbarang, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 10, 140, 25));

        txtharga.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txtharga.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtharga.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        txtharga.setDisabledTextColor(new java.awt.Color(255, 255, 255));
        jPanel5.add(txtharga, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 40, 140, 25));

        jLabel17.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel17.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel17.setText("Nama Barang");
        jLabel17.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jPanel5.add(jLabel17, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 10, 100, 25));

        jLabel20.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel20.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel20.setText("Harga");
        jPanel5.add(jLabel20, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 40, 50, 25));

        txtstokbarang.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txtstokbarang.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtstokbarang.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        txtstokbarang.setDisabledTextColor(new java.awt.Color(255, 255, 255));
        jPanel5.add(txtstokbarang, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 40, 140, 25));

        jLabel13.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel13.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel13.setText("Jumlah Kirim");

        txtjumlah.setFont(new java.awt.Font("Times New Roman", 0, 12)); // NOI18N
        txtjumlah.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtjumlah.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        txtjumlah.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtjumlahKeyReleased(evt);
            }
        });

        btambah1.setBackground(new java.awt.Color(0, 153, 255));
        btambah1.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        btambah1.setForeground(new java.awt.Color(255, 255, 255));
        btambah1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/icons8-plus-25_1.png"))); // NOI18N
        btambah1.setText("Pengiriman");
        btambah1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btambah1ActionPerformed(evt);
            }
        });

        bkurang.setBackground(new java.awt.Color(255, 0, 0));
        bkurang.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        bkurang.setForeground(new java.awt.Color(255, 255, 255));
        bkurang.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/icons8-remove-25.png"))); // NOI18N
        bkurang.setText("Pengiriman");
        bkurang.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bkurangActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(9, 9, 9)
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 510, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(9, 9, 9)
                        .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, 510, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(9, 9, 9)
                        .addComponent(jLabel13, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(txtjumlah, javax.swing.GroupLayout.PREFERRED_SIZE, 402, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(199, 199, 199)
                        .addComponent(btambah1)
                        .addGap(11, 11, 11)
                        .addComponent(bkurang, javax.swing.GroupLayout.PREFERRED_SIZE, 170, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(13, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(9, 9, 9)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(5, 5, 5)
                .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(5, 5, 5)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel13, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtjumlah, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btambah1, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(bkurang, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel6.add(jPanel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(396, 46, -1, -1));

        jPanel1.setBackground(new java.awt.Color(0, 204, 0));
        jPanel1.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        jLabel12.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel12.setText("Tanggal");

        jLabel16.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel16.setText("Id Pengiriman");

        txtid.setBackground(new java.awt.Color(0, 204, 0));
        txtid.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        txtid.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtid.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.LOWERED));
        txtid.setDisabledTextColor(new java.awt.Color(255, 0, 0));
        txtid.setOpaque(false);
        txtid.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                txtidFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtidFocusLost(evt);
            }
        });
        txtid.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtidActionPerformed(evt);
            }
        });
        txtid.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtidKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtidKeyTyped(evt);
            }
        });

        TanggalA.setBackground(new java.awt.Color(0, 204, 0));
        TanggalA.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        TanggalA.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        TanggalA.setText("22 November 2021");
        TanggalA.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.LOWERED));
        TanggalA.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                TanggalAFocusGained(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(9, 9, 9)
                        .addComponent(jLabel16, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel12, javax.swing.GroupLayout.PREFERRED_SIZE, 110, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txtid)
                    .addComponent(TanggalA, javax.swing.GroupLayout.DEFAULT_SIZE, 245, Short.MAX_VALUE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(8, 8, 8)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel16, javax.swing.GroupLayout.DEFAULT_SIZE, 26, Short.MAX_VALUE)
                    .addComponent(txtid))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 10, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel12, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(TanggalA, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );

        jPanel6.add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 46, 380, -1));

        jPanel4.setBackground(new java.awt.Color(0, 204, 0));
        jPanel4.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        jPanel4.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tbkirim.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tbkirim.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                tbkirimFocusGained(evt);
            }
        });
        tbkirim.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tbkirimMouseClicked(evt);
            }
            public void mousePressed(java.awt.event.MouseEvent evt) {
                tbkirimMousePressed(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                tbkirimMouseReleased(evt);
            }
        });
        jScrollPane3.setViewportView(tbkirim);

        jPanel4.add(jScrollPane3, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 900, 90));

        txttotal.setBackground(new java.awt.Color(0, 204, 0));
        txttotal.setFont(new java.awt.Font("Times New Roman", 1, 18)); // NOI18N
        txttotal.setForeground(new java.awt.Color(255, 255, 255));
        txttotal.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txttotal.setText("0");
        txttotal.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        txttotal.setDisabledTextColor(new java.awt.Color(51, 204, 0));
        txttotal.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txttotalActionPerformed(evt);
            }
        });
        txttotal.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txttotalKeyReleased(evt);
            }
        });
        jPanel4.add(txttotal, new org.netbeans.lib.awtextra.AbsoluteConstraints(670, 110, 240, 25));

        jLabel23.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        jLabel23.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel23.setText("Total Pengiriman");
        jPanel4.add(jLabel23, new org.netbeans.lib.awtextra.AbsoluteConstraints(540, 110, 110, 20));

        btambah2.setBackground(new java.awt.Color(0, 0, 255));
        btambah2.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        btambah2.setForeground(new java.awt.Color(255, 255, 255));
        btambah2.setText("Simpan Data");
        btambah2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btambah2ActionPerformed(evt);
            }
        });
        jPanel4.add(btambah2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 110, 130, 30));

        jPanel6.add(jPanel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 313, 920, 147));

        jLabel25.setFont(new java.awt.Font("Times New Roman", 1, 18)); // NOI18N
        jLabel25.setText("Daftar Barang ");
        jPanel6.add(jLabel25, new org.netbeans.lib.awtextra.AbsoluteConstraints(599, 13, -1, -1));

        btambah.setBackground(new java.awt.Color(0, 153, 204));
        btambah.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        btambah.setForeground(new java.awt.Color(255, 255, 255));
        btambah.setText("Tambah Data Pengiriman");
        btambah.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btambahActionPerformed(evt);
            }
        });
        jPanel6.add(btambah, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 210, 30));

        getContentPane().add(jPanel6, java.awt.BorderLayout.CENTER);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void txtidsupplierFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtidsupplierFocusGained
        // TODO add your handling code here:
    }//GEN-LAST:event_txtidsupplierFocusGained

    private void txtidsupplierKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtidsupplierKeyReleased
        // TODO add your handling code here:

    }//GEN-LAST:event_txtidsupplierKeyReleased

    private void txttlpActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txttlpActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txttlpActionPerformed

    private void tbbarangMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tbbarangMouseClicked
        // TODO add your handling code here:
        control.isiFieldBarang(tbbarang.getSelectedRow());
    }//GEN-LAST:event_tbbarangMouseClicked

    private void bkurangActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bkurangActionPerformed
        // TODO add your handling code here:
        int row = tbkirim.getSelectedRow();
        if(row!= -1){
            String cell = tbkirim.getModel().getValueAt(row, 0).toString();
            String nomer = tbkirim.getValueAt(row, 0).toString();

            String sql = "DELETE FROM isi_pengiriman where id_isi='"+nomer+"'";
            String resetno="ALTER TABLE isi_pengiriman DROP `id_isi`;";
            String consecutivenumber="ALTER TABLE isi_pengiriman ADD `id_isi` INT(11) NOT NULL AUTO_INCREMENT FIRST ,ADD PRIMARY KEY(`id_isi`);";

            //            if (JOptionPane.showConfirmDialog(null, "HAPUS DATA INI..??"
                //                ,"KONFIRMASI",JOptionPane.OK_CANCEL_OPTION,
                //                JOptionPane.INFORMATION_MESSAGE)== JOptionPane.OK_OPTION) {

            try {
                control.kurang_stok();
                conn.createStatement().execute(sql);
                conn.createStatement().execute(resetno);
                conn.createStatement().execute(consecutivenumber);

                JOptionPane.showMessageDialog(null, "Data Berhasil Dihapus");
             
                control.tampilurutannoPengiriman();
                control.isiTablePengiriman();
                sorter();
                Total();
                resetbarang();
                matikantextcs();
                control.isiTableBarang();
            } catch (Exception e) {
                //                JOptionPane.showMessageDialog(null, e);
            }
            //        }else{
            ////            JOptionPane.showMessageDialog(null, "Klik Salah Satu Tabel");
            ////        }
        }
    }//GEN-LAST:event_bkurangActionPerformed

    private void txtjumlahKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtjumlahKeyReleased
        // TODO add your handling code here:

    }//GEN-LAST:event_txtjumlahKeyReleased

    private void btambah1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btambah1ActionPerformed
        // TODO add your handling code here:

        simpantable();

        //        control.tampilurutannoStruk();
        //        control.tampilurutancostumer();
    }//GEN-LAST:event_btambah1ActionPerformed

    private void txtidFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtidFocusGained
        // TODO add your handling code here:
        sorter();
    }//GEN-LAST:event_txtidFocusGained

    private void txtidFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtidFocusLost
        // TODO add your handling code here:
    }//GEN-LAST:event_txtidFocusLost

    private void txtidActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtidActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtidActionPerformed

    private void txtidKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtidKeyReleased
        // TODO add your handling code here:
        sorter();
    }//GEN-LAST:event_txtidKeyReleased

    private void txtidKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtidKeyTyped
        // TODO add your handling code here:

    }//GEN-LAST:event_txtidKeyTyped

    private void tbkirimFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_tbkirimFocusGained
        // TODO add your handling code here:

    }//GEN-LAST:event_tbkirimFocusGained

    private void tbkirimMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tbkirimMouseClicked
        // TODO add your handling code here:
        //    control.isiFieldDetail(tbtransaksi.getSelectedRowCount());

        int i = tbkirim.getSelectedRow();
        if(i== -1){
            //tidak melakukan apa-apa
            return;
        }

        String no = (String) tbkirim.getValueAt(i, 0);
        txtno.setText(no);

        String struk = (String) tbkirim.getValueAt(i, 1);
        txtid.setText(struk);

        String kode_barang = (String) tbkirim.getValueAt(i, 2);
        txtidbarang.setText(kode_barang);

        String nama_barang = (String) tbkirim.getValueAt(i, 3);
        txtnamabarang.setText(nama_barang);

        Object harga = (Object) tbkirim.getValueAt(i, 4);
        txtharga.setText(String.valueOf(harga));

        Object jumlah = (Object) tbkirim.getValueAt(i, 5);
        txtjumlah.setText(String.valueOf(jumlah));

       

    }//GEN-LAST:event_tbkirimMouseClicked

    private void tbkirimMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tbkirimMousePressed
        // TODO add your handling code here:

    }//GEN-LAST:event_tbkirimMousePressed

    private void tbkirimMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tbkirimMouseReleased
        // TODO add your handling code here:
    }//GEN-LAST:event_tbkirimMouseReleased

    private void txtnoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtnoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtnoActionPerformed

    private void btambahActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btambahActionPerformed
        // TODO add your handling code here:

        control.mulai();
        control.reset();
        tanggal();
       
        control.tampilurutannoPengiriman();

        control.isiTablePengiriman();
        sorter();

        btambah1.setEnabled(false);
        btambah1.setEnabled(true);
        bkurang.setEnabled(true);
      
    }//GEN-LAST:event_btambahActionPerformed

    private void txttotalActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txttotalActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txttotalActionPerformed

    private void txttotalKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txttotalKeyReleased
        // TODO add your handling code here:
        Total();
    }//GEN-LAST:event_txttotalKeyReleased

    private void TanggalAFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_TanggalAFocusGained
        // TODO add your handling code here:
    }//GEN-LAST:event_TanggalAFocusGained

    private void btambah2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btambah2ActionPerformed
        // TODO add your handling code here:
        control.simpan_pengiriman();
    
       control.reset();
       control.awal();
       control.tampilurutannoPengiriman();
      sorter();
      tanggal();
      btambah1.setEnabled(false);
       bkurang.setEnabled(false); 
       
    }//GEN-LAST:event_btambah2ActionPerformed

    private void cbnamaItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cbnamaItemStateChanged
        // TODO add your handling code here:
        if (cbnama.getSelectedIndex()>0) {
         control.tampilkodesupplier();
        }
    }//GEN-LAST:event_cbnamaItemStateChanged


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel TanggalA;
    private javax.swing.JButton bkurang;
    private javax.swing.JButton btambah;
    private javax.swing.JButton btambah1;
    private javax.swing.JButton btambah2;
    private javax.swing.JComboBox<String> cbnama;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JLabel lbnamaadm;
    private javax.swing.JTable tbbarang;
    private javax.swing.JTable tbkirim;
    private javax.swing.JTextArea txtalamat;
    private javax.swing.JTextField txtharga;
    private javax.swing.JTextField txtid;
    private javax.swing.JTextField txtidbarang;
    private javax.swing.JTextField txtidsupplier;
    private javax.swing.JTextField txtjumlah;
    private javax.swing.JTextField txtnamabarang;
    private javax.swing.JTextField txtno;
    private javax.swing.JTextField txtstokbarang;
    private javax.swing.JLabel txttgl;
    private javax.swing.JTextField txttlp;
    private javax.swing.JTextField txttotal;
    // End of variables declaration//GEN-END:variables
    public JTextField getTxtNo(){
        return txtno;
    }
    public JTextField getTxtIdPengiriman(){
        return txtid;
    }
    public JLabel getTxtTanggal(){
        return txttgl;
    }
    public JTextField getTxtStok(){
        return txtstokbarang;
    }
    
    //customer
    public JTextField getTxtIdSupplier(){
        return txtidsupplier;
    }
    public JComboBox getTxtNamaSupplier(){
        return cbnama;
    }
    public JTextArea getTxtAlamat(){
        return txtalamat;
    }
    public JTextField getTxtTelepon(){
        return txttlp;
    }
    //barang
    public JTextField getTxtKodeBarang(){
        return txtidbarang;
    }
    public JTextField getTxtNamaBarang(){
        return txtnamabarang;
    }
    public JTextField getTxtHargaBarang(){
        return txtharga;
    }
    
   
    //penjualan
    public JTextField getTxtJumlahKirim(){
        return txtjumlah;
    }
 public JTextField getTxtTotalKirim(){
        return txttotal;
    }

  public JLabel getTxtIdPetugas(){
        return lbnamaadm;
    }
  

    
    public JTable getTablePengiriman(){
        return tbkirim;
    }
     public JTable getTableBarang(){
        return tbbarang;
    }
}
